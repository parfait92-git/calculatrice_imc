{"ast":null,"code":"import * as imcSvc from './services/imc.service';\nimport ImcSchema from '../../models/Imc';\nimport connectDB from '../../utils/connectDB';\nimport valid from '../../utils/valid';\nconnectDB();\nexport default function handler(req, res) {\n  if (req.method === 'POST') {\n    console.log(req);\n    const poids = req.body.poids;\n    const taille = req.body.taille;\n    const imc = imcSvc.CalculImc(taille, poids);\n    res.status(200).json(imc);\n    saveIndice(imc, res);\n  }\n\n  const saveIndice = async (req, res) => {\n    try {\n      const {\n        taille,\n        poids,\n        careeTaille,\n        imc,\n        poids_normal\n      } = req.body;\n      const errMsg = valid(taille, poids);\n\n      if (errMsg) {\n        return res.status(400).json({\n          err: errMsg\n        });\n      }\n\n      const newIndice = new ImcSchema({\n        taille,\n        poids\n      });\n      await newIndice.save();\n      res.json({\n        \"message\": \"succes d'enregistrement!\"\n      });\n    } catch (error) {\n      return res.status(500);\n    }\n  };\n}","map":{"version":3,"sources":["C:/Users/aristant/Music/start_with_nextjs/calculatrice_imc/pages/api/imc.js"],"names":["imcSvc","ImcSchema","connectDB","valid","handler","req","res","method","console","log","poids","body","taille","imc","CalculImc","status","json","saveIndice","careeTaille","poids_normal","errMsg","err","newIndice","save","error"],"mappings":"AAAA,OAAO,KAAKA,MAAZ,MAAwB,wBAAxB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AAEAD,SAAS;AAET,eAAe,SAASE,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACxC,MAAGD,GAAG,CAACE,MAAJ,KAAe,MAAlB,EAA0B;AACxBC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACA,UAAMK,KAAK,GAAGL,GAAG,CAACM,IAAJ,CAASD,KAAvB;AACA,UAAME,MAAM,GAAGP,GAAG,CAACM,IAAJ,CAASC,MAAxB;AACA,UAAMC,GAAG,GAAGb,MAAM,CAACc,SAAP,CAAiBF,MAAjB,EAAyBF,KAAzB,CAAZ;AACAJ,IAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACAI,IAAAA,UAAU,CAACJ,GAAD,EAAMP,GAAN,CAAV;AACD;;AAED,QAAMW,UAAU,GAAG,OAAOZ,GAAP,EAAYC,GAAZ,KAAoB;AACrC,QAAI;AACA,YAAM;AAAEM,QAAAA,MAAF;AAAUF,QAAAA,KAAV;AAAiBQ,QAAAA,WAAjB;AAA8BL,QAAAA,GAA9B;AAAmCM,QAAAA;AAAnC,UAAoDd,GAAG,CAACM,IAA9D;AACA,YAAMS,MAAM,GAAGjB,KAAK,CAACS,MAAD,EAASF,KAAT,CAApB;;AACA,UAAGU,MAAH,EAAW;AACP,eAAOd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACK,UAAAA,GAAG,EAAED;AAAN,SAArB,CAAP;AACH;;AACD,YAAME,SAAS,GAAG,IAAIrB,SAAJ,CAAc;AAC5BW,QAAAA,MAD4B;AAE5BF,QAAAA;AAF4B,OAAd,CAAlB;AAIA,YAAMY,SAAS,CAACC,IAAV,EAAN;AACAjB,MAAAA,GAAG,CAACU,IAAJ,CAAS;AAAC,mBAAW;AAAZ,OAAT;AACH,KAZD,CAYE,OAAOQ,KAAP,EAAc;AACZ,aAAOlB,GAAG,CAACS,MAAJ,CAAW,GAAX,CAAP;AACH;AACJ,GAhBC;AAkBD","sourcesContent":["import * as imcSvc from './services/imc.service';\r\nimport ImcSchema from '../../models/Imc';\r\nimport connectDB from '../../utils/connectDB';\r\nimport valid from '../../utils/valid';\r\n\r\nconnectDB();\r\n\r\nexport default function handler(req, res) {\r\n  if(req.method === 'POST') {\r\n    console.log(req);\r\n    const poids = req.body.poids;\r\n    const taille = req.body.taille;\r\n    const imc = imcSvc.CalculImc(taille, poids);\r\n    res.status(200).json(imc)\r\n    saveIndice(imc, res);\r\n  }\r\n\r\n  const saveIndice = async (req, res) => {\r\n    try {\r\n        const { taille, poids, careeTaille, imc, poids_normal } = req.body;\r\n        const errMsg = valid(taille, poids);\r\n        if(errMsg) {\r\n            return res.status(400).json({err: errMsg})\r\n        }\r\n        const newIndice = new ImcSchema({ \r\n            taille, \r\n            poids, \r\n        });\r\n        await newIndice.save();\r\n        res.json({\"message\": \"succes d'enregistrement!\"});\r\n    } catch (error) {\r\n        return res.status(500);\r\n    }\r\n}\r\n  \r\n}"]},"metadata":{},"sourceType":"module"}